<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myapp.sscmybatis_02._01_mapper.AnswerMapper">

<!--  mapper - DTO - VO - service - controller -->
    <select id="getAnswerList" resultType="com.myapp.sscmybatis_02._03_vo.AnswerVO">

        SELECT
            a.answerNo,
            a.questionNo,
            a.content,
            a.uploadDate,
            a.userNo,
            q.questionNo AS question_questionNo,
            q.userNo AS question_userNo,
            q.content AS question_content,
            q.uploadDate AS question_uploadDate,
            q.productNo AS question_productNo,
            u.userNo AS user_userNo,
            u.userName AS user_userName
        FROM
            answer a
                LEFT JOIN
            question q ON a.questionNo = q.questionNo
                LEFT JOIN
            user u ON a.userNo = u.userNo
    </select>

    <insert id="insertAnswer">
        INSERT INTO answer (questionNo, content, uploadDate, userNo)
        VALUES (#{questionNo}, #{content}, NOW(), #{userNo})
    </insert>

</mapper>

